<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Número a binario (7 bits) con valores en casillas</title>
    <style>
      :root{
        --bg:#f98b51;
        --zero:#111;     /* 0 = negro */
        --one:#fff;      /* 1 = blanco */
        --text:#fff;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0; background:var(--bg); color:var(--text);
        font: clamp(14px, 1.6vmin, 18px)/1.3 system-ui, Segoe UI, Roboto, Inter, Arial, sans-serif;
        display:grid; place-items:center;
      }
      .wrap{
        width:min(1000px, 92vw);
        display:grid; gap:5vmin;
        justify-items:center; text-align:center;
      }

      /* Número principal como input */
      #num{
        appearance:textfield; -moz-appearance:textfield; -webkit-appearance:textfield;
        text-align:center; width:8ch;
        font-size: clamp(48px, 18vmin, 160px); font-weight:700;
        background:transparent; color:var(--text);
        border:none; outline:none; border-bottom:3px solid rgba(255,255,255,.7);
      }
      #num:focus{ border-bottom-color:#fff }

      /* Controles */
      .controls{
        display:flex; gap:1rem; align-items:center; opacity:.95;
        font-size:clamp(12px, 2.2vmin, 18px);
      }
      .controls input{ transform:scale(1.2) }

      /* Tira de bits */
      .bits{
        display:grid; grid-template-columns: repeat(7, 1fr);
        gap:min(24px, 3vmin); width:100%;
      }
      .bit{
        position:relative; aspect-ratio:1/1; border-radius:8px;
        box-shadow: 0 6px 18px rgba(0,0,0,.15) inset, 0 2px 10px rgba(0,0,0,.15);
        transition: background-color .15s ease-out;
        background:var(--zero); display:grid; place-items:center;
      }
      .bit.one{ background:var(--one) }

      /* Número dentro de cada casilla: siempre negro */
      .val{
        color:#000; font-weight:700;
        font-size:clamp(10px, 2.4vmin, 20px);
        letter-spacing:.02em;
        opacity:0; transition:opacity .15s ease-out;
        user-select:none;
      }
      .wrap.show-values .val{ opacity:1 }

      .legend{
        opacity:.85; letter-spacing:.04em;
        font-size:clamp(12px, 2.2vmin, 18px);
      }
    </style>
  </head>
  <body>
    <main class="wrap" aria-label="Convertidor a binario de 7 bits">
      <input
        id="num"
        type="number"
        min="0"
        max="127"
        step="1"
        value="6"
        inputmode="numeric"
        aria-label="Número (0 a 127)"
      />

      <div class="controls">
        <label
          ><input id="toggleValues" type="checkbox" /> Mostrar valores en las
          casillas</label
        >
      </div>

      <section
        class="bits"
        aria-live="polite"
        aria-label="Representación binaria en 7 bits"
      >
        <!-- MSB → LSB -->
        <div class="bit" data-pos="6" data-value="64" title="Bit 6 (64)">
          <span class="val">64</span>
        </div>
        <div class="bit" data-pos="5" data-value="32" title="Bit 5 (32)">
          <span class="val">32</span>
        </div>
        <div class="bit" data-pos="4" data-value="16" title="Bit 4 (16)">
          <span class="val">16</span>
        </div>
        <div class="bit" data-pos="3" data-value="8" title="Bit 3 (8)">
          <span class="val">8</span>
        </div>
        <div class="bit" data-pos="2" data-value="4" title="Bit 2 (4)">
          <span class="val">4</span>
        </div>
        <div class="bit" data-pos="1" data-value="2" title="Bit 1 (2)">
          <span class="val">2</span>
        </div>
        <div class="bit" data-pos="0" data-value="1" title="Bit 0 (1)">
          <span class="val">1</span>
        </div>
      </section>

      <div class="legend">Negro 0 • Blanco 1</div>
    </main>

    <script>
      (function(){
        const wrap  = document.querySelector('.wrap');
        const input = document.getElementById('num');
        const bits  = [...document.querySelectorAll('.bit')]; // MSB→LSB
        const toggleValues = document.getElementById('toggleValues');

        function render(n){
          const val = Math.max(0, Math.min(127, Number.isFinite(+n) ? +n : 0));
          if (val !== +input.value) input.value = val;

          const bin = val.toString(2).padStart(7, '0'); // 7 bits

          for (let i = 0; i < bits.length; i++){
            const isOne = bin[i] === '1';
            bits[i].classList.toggle('one', isOne);
            bits[i].setAttribute('aria-label', `Bit ${6-i} = ${isOne ? 1 : 0}`);
          }
        }

        // Eventos
        input.addEventListener('input', e => render(e.target.value));
        input.addEventListener('blur',  e => render(e.target.value));
        input.addEventListener('keydown', e => {
          if (e.key === 'ArrowUp')   { e.preventDefault(); render(+input.value + 1); }
          if (e.key === 'ArrowDown') { e.preventDefault(); render(+input.value - 1); }
        });

        toggleValues.addEventListener('change', e => {
          wrap.classList.toggle('show-values', e.target.checked);
        });

        // Render inicial
        render(input.value);
      })();
    </script>
  </body>
</html>
